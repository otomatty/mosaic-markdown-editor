# 実装計画書: Mosaic Markdown Editor

この計画書は、Lichtblickプロジェクトで使われている技術スタックを習得することを目標とした、多機能Markdownエディタの開発ロードマップです。

## 1. プロジェクト概要

- **プロジェクト名:** Mosaic Markdown Editor
- **目的:** ElectronとモダンなWeb技術（React, MUI, TypeScript等）を組み合わせたデスクトップアプリ開発スキルを実践的に習得する。
- **コア機能:**
    - Markdownの編集とリアルタイムプレビュー機能
    - `React Mosaic`による分割・リサイズ可能なパネルレイアウト
    - ネイティブファイル操作（開く、保存、ドラッグ＆ドロップ）
    - `MUI`と`TSS-React`によるモダンなUI構築
    
## 2. 開発フェーズ

### 🎯 現在の状況（2025年1月10日時点）
- **完了フェーズ:** フェーズ1, フェーズ2, フェーズ3, フェーズ4-1（国際化実装）, フェーズ4-2（新規ファイル作成機能）
- **進行中フェーズ:** フェーズ4（アプリケーションの完成度向上）
- **次のタスク:** 設定永続化(electron-store)
- **全体進捗:** 約90%完了

### 📋 完了済み機能
- ✅ MUI + TSS-React基盤UI
- ✅ Electron IPC通信（ファイル操作）
- ✅ テキストエディタ（未保存変更トラッキング）
- ✅ Markdownリアルタイムプレビュー
- ✅ コンポーネント分割リファクタリング
- ✅ React Mosaic動的パネルレイアウト
- ✅ ドラッグ&ドロップファイル操作
- ✅ 国際化(i18n) - 日本語・英語対応
- ✅ 新規ファイル作成機能 - エディタ自動表示
- ✅ 型安全なTypeScript実装

### フェーズ1: 基盤構築とUIセットアップ（✅ 完了）
- **目標:** アプリの基本ウィンドウを表示し、MUIとTSS-ReactでUIの骨格を構築する。
- **主要タスク:**
    1. - [x] `electron-vite`でプロジェクトを作成する。
    2. - [x] 必要なUIライブラリ (`@mui/material`, `tss-react`等) をインストールする。[必要なライブラリ](./phase1_libraries-install.md)
    3. - [x] `App.tsx`を編集し、MUIの`ThemeProvider`, `CssBaseline`, `AppBar`を配置する。[実装詳細](./phase1-2_mui-setup.md)
    4. - [x] `TSS-React`の`makeStyles`でAppBarにスタイルを適用する。[実装詳細](./phase1-2_mui-setup.md)
    5. - [x] `yarn dev`で動作確認し、基本的なUIが表示されることを確認する。[実装詳細](./phase1-2_mui-setup.md)

### フェーズ2: Electronの核心 - ファイルI/Oの実装（✅ 完了）
- **目標:** メインプロセスとレンダラープロセス間の安全な通信（IPC）を理解し、基本的なファイル操作（開く/保存）を実装する。
- **主要タスク:**
    1. - [x] **型定義作成:** TypeScript型定義ファイルを作成し、型安全なAPI設計を実装。[実装詳細](./phase2-1_type-definitions.md)
    2. - [x] **プリロードスクリプト:** `contextBridge`を使い、レンダラーに公開するAPI (`window.electronAPI`)を定義。[実装詳細](./phase2-2_preload-implementation.md)
    3. - [x] **メインプロセス:** `ipcMain.handle`で非同期リクエストを待ち受け、OSダイアログとファイル操作を実装。[実装詳細](./phase2-3_main-process-ipc.md)
    4. - [x] **レンダラープロセス:** ファイルメニューUI実装と`window.electronAPI`の関数呼び出し。[実装詳細](./phase3-1_file-menu-implementation.md)

### フェーズ3: 高度なUI - パネルレイアウトとリアルタイムプレビュー（✅ 完了）
- **目標:** `React Mosaic`で分割パネルを、`React DnD`でファイルドロップを実装し、アプリのコア機能を完成させる。
- **主要タスク:**
    1. - [x] **テキストエディタ実装:** フルスクリーンテキストエディタと未保存変更トラッキング。[実装詳細](./phase3-2_text-editor-implementation.md)
    2. - [x] **Markdownプレビュー:** `marked`を使用したリアルタイムプレビュー機能。[実装詳細](./phase3-3_markdown-preview-implementation.md)
    3. - [x] **コンポーネントリファクタリング:** App.tsxの分割と保守性向上。[実装詳細](./phase3-4_component-refactoring.md)
    4. - [x] **React Mosaic導入:** 分割・リサイズ可能なパネルレイアウトの実装。[実装詳細](./phase3-5_react-mosaic-implementation.md)
    5. - [x] **ドラッグ&ドロップ:** `React DnD`を使用したファイルドロップ機能。[実装詳細](./phase3-6_drag-drop-implementation.md)

### フェーズ4: アプリケーションの完成度向上（🚧 部分完了）
- **目標:** 多言語対応や設定保存機能を実装し、より実用的なアプリケーションに近づける。
- **主要タスク:**
    1. - [x] **国際化(i18n):** `react-i18next`を導入し、UIのテキストを日本語/英語で切り替えられるようにする。[実装詳細](./phase4-1_i18n-implementation.md)
    2. - [x] **新規ファイル作成:** 空のMarkdownファイルを新規作成する機能を実装する。[実装詳細](./phase4-2_new-file-creation.md)
    3. - [ ] **設定の永続化:** `electron-store`を導入し、ウィンドウサイズや位置、選択中の言語などをアプリ終了後も保持できるようにする。

### フェーズ5: ビルドと配布
- **目標:** `electron-builder`を使い、クロスプラットフォーム（macOS, Windows, Linux）で動作する配布可能なインストーラーを作成する。
- **主要タスク:**
    1. - [ ] アプリアイコンを作成・設定する。
    2. - [ ] `package.json`に`electron-builder`用の設定を記述する（`appId`, `productName`など）。
    3. - [ ] `yarn build`コマンドでビルドが成功し、インストーラーが生成されることを確認する。

## 3. 次のアクションプラン

### 🎯 直近の作業（フェーズ4-2完了）

#### 4-3. 設定の永続化（優先度：高）
- **目標:** `electron-store`を使用した設定データの永続化
- **作業内容:**
  - `electron-store`の設定と初期化
  - ウィンドウサイズ・位置の保存・復元
  - 言語設定の永続化
  - 最近開いたファイルの履歴管理

#### 4-4. UI/UXの最終調整（優先度：低）
- **目標:** より使いやすいインターフェースの実装
- **作業内容:**
  - エディタのフォント設定機能
  - テーマの切り替え機能
  - ショートカットキーの実装
  - 設定画面の作成

### 🔄 継続的な改善
- **コードレビュー:** 新機能追加時の品質チェック
- **ドキュメント更新:** 実装詳細の記録と更新
- **テスト追加:** 主要機能の動作確認テスト
- **パフォーマンス最適化:** 大きなファイルの処理改善